{"version":3,"sources":["webpack:///webpack/bootstrap 96a6a50f47850d59191a","webpack:///./src/map.js","webpack:///./src/configuration.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA,yC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA,kDAAiD,SAAS;AAC1D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,uBAAuB;AACtC;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;ACpIA;AACA;AACA;AACA;AACA,uFAAsF,KAAK;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"dist.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 96a6a50f47850d59191a\n **/","var p = window.point;\nvar map = new AMap.Map(\"map_container\"); \nif (p) {\n  map.setCenter([p.lon, p.lat])\n}\n\nvar list, list2, animation\nvar currentIndex = 0\nvar renyanContentShare = JSON.parse(localStorage.renyanContentShare)\nclearMarks()\nmap.on('complete', function() {\n  configureData(p)\n  drawPoints()\n  configurePoint()\n  animationLine()\n})\nmap.setZoom(5)\nvar configure = require('./configuration')\nconfigure()\n\nfunction drawPoints() {\n  var mass = new AMap.MassMarks(list, {\n     url: 'http://7xpecj.com1.z0.glb.clouddn.com/2/point.png',\n     anchor: new AMap.Pixel(10, 10),\n     size: new AMap.Size(20, 20),\n     opacity:1,\n     cursor:'pointer',\n     zIndex: 1\n  });\n  mass.setMap(map)\n}\n\nfunction configurePoint() {\n  var start = list2[0]\n  animation = new AMap.Marker({\n    map: map,\n    position: start,\n    icon: \"http://7xpecj.com1.z0.glb.clouddn.com/6/fire_ball.png\",\n    offset: new AMap.Pixel(-40, -20),\n    autoRotation: true\n  });\n}\n\nvar animationLine = function() {\n  animation.moveAlong(list2, 600000, function(k){return k}, true);\n}\n\nfunction clearMarks() {\n  var mark = document.getElementsByClassName('amap-logo')[0]\n  if (mark && mark.parentElement) {\n    mark.parentElement.removeChild(mark)\n  }\n  var copyright = document.getElementsByClassName('amap-copyright')[0]\n  if (copyright && copyright.parentElement) {\n    copyright.parentElement.removeChild(copyright)\n  }\n}\n\nfunction configureData(p) {\n  list = []\n  list2 = []\n  getArray(p)\n  function getArray(p) {\n    list.push({lnglat: [p.lon, p.lat]})\n    list2.push(new AMap.LngLat(p.lon, p.lat))\n    if (p.nodes && p.nodes.length > 0) {\n      p.nodes.forEach(function(node) {\n        getArray(node)\n      })\n    }\n  }\n}\n\nwindow.setSpeadCount = function(viewed, added){\n  var userCountText = document.getElementById('friend_push_count')\n  var viewCountText = document.getElementById('view_push_count')\n  if (userCountText && viewCountText) {\n    userCountText.textContent = (viewed / added) + 1\n    viewCountText.style.color = '#FF3F3F'\n  }\n  textAnimation.beginValue = viewed\n  textAnimation.endValue = viewed + added\n  textAnimation.start()\n}\n\nvar textAnimation = {}\ntextAnimation.running = false\ntextAnimation.beginValue = 0\ntextAnimation.endValue = 0\ntextAnimation.progress = 0\ntextAnimation.caculateCurrent = function () {\n  return (this.endValue - this.beginValue) * this.progress\n}\ntextAnimation.start = function() {\n  this.progress = 0\n  this.running = true \n}\n\ntextAnimation.stop = function() {\n  this.running = false\n}\n\ntextAnimation.continue = function() {\n  if (this.progress < 0) {\n    this.running = true\n  }\n}\n\ntextAnimation.update = function() {\n  if (this.running) {\n    textAnimation.progress += 0.02\n    var current = textAnimation.caculateCurrent().toFixed(0)\n    var fontSize = (14 + 14 * getBounzeValue(textAnimation.progress))\n    var userCountText = document.getElementById('friend_push_count')\n    var viewCountText = document.getElementById('view_push_count')\n    if (userCountText && viewCountText) {\n      viewCountText.textContent = current\n      viewCountText.style.fontSize = fontSize + 'px'\n    }\n    if (textAnimation.progress >= 1) {\n      this.running = false\n    }\n  }\n}\n\nfunction getBounzeValue(value) {\n  return -4 * (value - 0.5) * (value - 0.5) + 1\n}\n\nanimate();\nfunction animate() {\n  textAnimation.update()\n  requestAnimationFrame(animate);\n}\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/map.js\n ** module id = 0\n ** module chunks = 0\n **/","\nvar configure = function() {\n  window.clickSpreadButton = function() {\n    if (!renyanContentShare[spreadParams.cid]) {\n      var spread = document.getElementById('spread_button')\n      Ajax('http://app.ry.api.renyan.cn/rest/share/spread/' + spreadParams.cid).post({a: 1}).done(function(result) {\n      if (result == 'success') {\n        renyanContentShare[spreadParams.cid] = true;\n        localStorage.renyanContentShare = JSON.stringify(renyanContentShare)\n        setSpeadCount(spreadParams.viewed, spreadParams.added)\n        spread.style.backgroundImage = \"url('http://7xpecj.com1.z0.glb.clouddn.com/spreaded_button_icon.png')\"\n        }\n      })\n    } else {\n      console.log('has sended')\n    }\n  }\n  configureSpreadButton()\n  hideShareButton()\n}\n\n\n\nfunction configureSpreadButton() {\n  var spread = document.getElementById('spread_button')\n  if (!spread) return\n  if (!renyanContentShare[spreadParams.cid]) {\n    spread.style.backgroundImage = \"url('http://7xpecj.com1.z0.glb.clouddn.com/spread_button_icon.png')\"\n  } else {\n    spread.style.backgroundImage = \"url('http://7xpecj.com1.z0.glb.clouddn.com/spreaded_button_icon.png')\"\n  }\n}\n\nfunction hideShareButton() {\n  if (!(window.webkit && webkit.messageHandlers && webkit.messageHandlers.share && webkit.messageHandlers.share.postMessage) && !(window.android && android.share)) {\n    var button = document.getElementById('share_button')\n    if (button) {\n      button.style.display = 'none'\n    }\n  }\n}\n\nmodule.exports = configure\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/configuration.js\n ** module id = 1\n ** module chunks = 0\n **/"],"sourceRoot":""}